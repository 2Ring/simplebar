/**
 * TrackpadScrollEmulator
 * Author: Jonathan Nicol @f6design
 */(function(a){function c(c,d){function m(){f.prepend('<div class="scrollbar"><div class="drag-handle"></div></div>');i=f.find(".scrollbar");j=f.find(".drag-handle");h.wrap('<div class="scroll-content" />');g=f.find(".scroll-content");w();f.on("mouseenter",t);j.on("mousedown",n);g.on("scroll",q);r()}function n(b){b.preventDefault();k=b.pageY-j.offset().top;a(document).on("mousemove",o);a(document).on("mouseup",p)}function o(a){a.preventDefault();var b=a.pageY-i.offset().top-k,c=b/i.height(),d=c*h.height();g.scrollTop(d)}function p(){a(document).off("mousemove",o);a(document).off("mouseup",p)}function q(a){t()}function r(){var a=h.height(),b=s(),c=i.height(),d=c/a,e=Math.round(d*b)+2,f=Math.floor(d*(c-2))-2;if(c<a){j.css({top:e,height:f});i.show()}else i.hide()}function s(){return g.scrollTop()}function t(){r();u()}function u(){j.addClass("visible");typeof l=="number"&&window.clearTimeout(l);l=window.setTimeout(function(){v()},1e3)}function v(){j.removeClass("visible");typeof l=="number"&&window.clearTimeout(l)}function w(){g.width(f.width()+20);g.height(f.height())}function x(){w();r()}function y(a,b){if(!b)return d[a];d[a]=b}function z(){h.insertBefore(i);i.remove();g.remove();A("onDestroy");f.removeData("plugin_"+b)}function A(a){d[a]!==undefined&&d[a].call(e)}var e=c,f=a(c),g,h=f.find(".content"),i,j,k,l;d=a.extend({},a.fn[b].defaults,d);m();return{option:y,destroy:z,recalculate:x}}var b="TrackpadScrollEmulator";a.fn[b]=function(d){if(typeof arguments[0]=="string"){var e=arguments[0],f=Array.prototype.slice.call(arguments,1),g;this.each(function(){if(!a.data(this,"plugin_"+b)||typeof a.data(this,"plugin_"+b)[e]!="function")throw new Error("Method "+e+" does not exist on jQuery."+b);g=a.data(this,"plugin_"+b)[e].apply(this,f)});return g!==undefined?g:this}if(typeof d=="object"||!d)return this.each(function(){a.data(this,"plugin_"+b)||a.data(this,"plugin_"+b,new c(this,d))})};a.fn[b].defaults={onInit:function(){},onDestroy:function(){}}})(jQuery);