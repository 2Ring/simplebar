/**
 * TrackpadScrollEmulator
 * Author: Jonathan Nicol @f6design
 */(function(a){function c(c,d){function q(){if(f.hasClass("horizontal")){m="horiz";n="scrollLeft";o="width";p="left"}f.prepend('<div class="tse-scrollbar"><div class="drag-handle"></div></div>');i=f.find(".tse-scrollbar");j=f.find(".drag-handle");h.wrap('<div class="tse-scroll-content" />');g=f.find(".tse-scroll-content");f.css({overflow:"hidden"});z();f.on("mouseenter",w);j.on("mousedown",r);g.on("scroll",u);v()}function r(b){b.preventDefault();var c=b.pageY;m==="horiz"&&(c=b.pageX);k=c-j.offset()[p];a(document).on("mousemove",s);a(document).on("mouseup",t)}function s(a){a.preventDefault();var b=a.pageY;m==="horiz"&&(b=a.pageX);var c=b-i.offset()[p]-k,d=c/i[o](),e=d*h[o]();g[n](e)}function t(){a(document).off("mousemove",s);a(document).off("mouseup",t)}function u(a){w()}function v(){var a=h[o](),b=g[n](),c=i[o](),d=c/a,e=Math.round(d*b)+2,f=Math.floor(d*(c-2))-2;if(c<a){m==="vert"?j.css({top:e,height:f}):j.css({left:e,width:f});i.show()}else i.hide()}function w(){v();x()}function x(){j.addClass("visible");typeof l=="number"&&window.clearTimeout(l);l=window.setTimeout(function(){y()},1e3)}function y(){j.removeClass("visible");typeof l=="number"&&window.clearTimeout(l)}function z(){if(m==="vert"){g.width(f.width()+20);g.height(f.height())}else{g.width(f.width());g.height(f.height()+20);h.height(f.height())}}function A(){z();v()}function B(a,b){if(!b)return d[a];d[a]=b}function C(){h.insertBefore(i);i.remove();g.remove();h.css({height:f.height()+"px","overflow-y":"scroll"});D("onDestroy");f.removeData("plugin_"+b)}function D(a){d[a]!==undefined&&d[a].call(e)}var e=c,f=a(c),g,h=f.find(".tse-content"),i,j,k,l,m="vert",n="scrollTop",o="height",p="top";d=a.extend({},a.fn[b].defaults,d);q();return{option:B,destroy:C,recalculate:A}}var b="TrackpadScrollEmulator";a.fn[b]=function(d){if(typeof arguments[0]=="string"){var e=arguments[0],f=Array.prototype.slice.call(arguments,1),g;this.each(function(){if(!a.data(this,"plugin_"+b)||typeof a.data(this,"plugin_"+b)[e]!="function")throw new Error("Method "+e+" does not exist on jQuery."+b);g=a.data(this,"plugin_"+b)[e].apply(this,f)});return g!==undefined?g:this}if(typeof d=="object"||!d)return this.each(function(){a.data(this,"plugin_"+b)||a.data(this,"plugin_"+b,new c(this,d))})};a.fn[b].defaults={onInit:function(){},onDestroy:function(){}}})(jQuery);